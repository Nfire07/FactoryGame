#!/usr/bin/env bash

set -e

echo "Starting raylib Docker container on Linux"

if ! command -v docker >/dev/null 2>&1; then
    echo "Docker is not installed"
    exit 1
fi

if ! docker info >/dev/null 2>&1; then
    echo "Docker daemon is not running"
    exit 1
fi

if ! docker compose version >/dev/null 2>&1; then
    echo "docker compose is not available"
    exit 1
fi

if [ -z "$DISPLAY" ]; then
    echo "DISPLAY is not set"
    exit 1
fi

if ! command -v xhost >/dev/null 2>&1; then
    echo "xhost is not installed"
    exit 1
fi

xhost +local:docker >/dev/null

echo "Launching container"
docker compose --profile linux up --build -d

echo "Developing the container" 

./dev-mode

